 <html>
     <head>
        <title>MTL实验室</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" href="http://apps.bdimg.com/libs/bootstrap/3.3.0/css/bootstrap.min.css">
        <script src="http://apps.bdimg.com/libs/jquery/2.1.1/jquery.min.js"></script>
        <script src="http://apps.bdimg.com/libs/bootstrap/3.3.0/js/bootstrap.min.js"></script>
        <script src="/webtool/site_media/lib/jquery-easyui-1.4.2/jquery.min.js" type="text/javascript" charset="utf-8"></script>                               
        <script src="/webtool/site_media/lib/highcharts/highcharts.js" type="text/javascript"></script>
        <script type="text/javascript">
			$(function () {
				$('#container0').highcharts({
					title: {
						text: '',
						x: -20 //center
					},
					xAxis: {
						type:'linear',
						tickInterval:50,
						title: {
							text: '帧数'
						}
					},
					yAxis: {
						min:0,
						title: {
							text: 'FPS'
						},
                        plotLines: [{   
                            value: 20,  
                            color: 'green',  
                            dashStyle: 'shortdash',  
                            width: 2,  
                            
                        },{  
                            value: 30,  
                            color: 'green',  
                            dashStyle: 'shortdash',  
                            width: 2,  
                
                        }] 

					},
					tooltip: {
                        formatter: function() {
                            return '帧数：<b>'+ this.point.x +'</b><br/>'+
                                   'FPS: <b>'+this.point.y+'</b>';
                        }
                    },
					plotOptions:{
					},
					legend: {
						layout: 'vertical',
						align: 'right',
						verticalAlign: 'middle',
						borderWidth: 0
					},
					series: [{
						name: 'FPS',
						data: {{FPSRes.FPSList|safe}}
					}]
				},function(chart){
                    InitialYaxisLabelsFPS(chart);
                });

				$('#container2').highcharts({
					title: {
						text: '',
						x: -20 //center
					},
					xAxis: {
						type:'linear',
						tickInterval:50,
						title: {
							text: '帧数'
						}
					},
					yAxis: {
                        min:0,
						title: {
							text: 'DrawCalls'
						},
						plotLines: [{   
                            value: 200,  
                            color: 'green',  
                            dashStyle: 'shortdash',  
                            width: 2,  
                        }] 
					},
					plotOptions:{
						series:{
			                showCheckbox:true
			            }
					},
                    tooltip: {
                        formatter: function() {
                            return '帧数：<b>'+ this.point.x +'</b><br/>'+
                                   'Draw Calls: <b>'+this.point.y+'</b>';
                        }
                    },
					legend: {
						enabled: false,
						layout: 'vertical',
						align: 'right',
						verticalAlign: 'top',
						borderWidth: 0,
					},
					series: [{
						name: 'DrawCalls',
						data: {{DCRes.DCList|safe}}
					}]
				},function(chart){
                    InitialYaxisLabelsDC(chart);
                });

				$('#container3').highcharts({
					title: {
						text: '',
						x: -20 //center
					},
					xAxis: {
						type:'linear',
						tickInterval:50,
						title: {
							text: '帧数'
						}
					},
					yAxis: {
                        min:0,
						title: {
							text: 'Triangles'
						},
						plotLines: [{   
                            value: 100000,  
                            color: 'green',  
                            dashStyle: 'shortdash',  
                            width: 2,  

                        }] 
					},
                    tooltip: {
                        formatter: function() {
                            return '帧数：<b>'+ this.point.x +'</b><br/>'+
                                   'Triangles: <b>'+this.point.y+'</b>';
                        }
                    },
					plotOptions:{
						series:{
			                showCheckbox:true
			            }
					},
					legend: {
						enabled: false,
						layout: 'vertical',
						align: 'right',
						verticalAlign: 'top',
						borderWidth: 0,
					},
					series: [{
						name: 'Triangles',
						data:{{TRIRes.TRIList|safe}} 
					}]
				},function(chart){
                    InitialYaxisLabelsTRI(chart);
                });
			

                $('#container4').highcharts({
                    title: {
                        text: '',
                        x: -20 //center
                    },
                    xAxis: {
                        type:'linear',
                        tickInterval:50,
                        title: {
                            text: '帧数'
                        }
                    },
                    yAxis: {
                        min:0,
                        title: {
                            text: 'Reserved/Total 内存占用(MB)'
                        }
                    },
                    tooltip: {
                        formatter: function() {
                            return '<b>'+ this.series.name +'</b><br/>'+
                            '帧数：<b>'+ this.point.x +'</b><br/>'+
                            '内存占用: <b>'+this.point.y+'MB</b>';
                        }
                    },
                    plotOptions:{
                    },
                    legend: {
                        layout: 'vertical',
                        align: 'right',
                        verticalAlign: 'middle',
                        borderWidth: 0
                    },
                    series: [{
                        name: 'ReservedTotal',
                        data: {{MEMRes.ReservedTotal|safe}}
                    },{
                        name: 'UsedTotal',
                        data: {{MEMRes.UsedTotal|safe}}
                    },{
                        name: 'ReservedUnity',
                        data: {{MEMRes.ReservedUnity|safe}}
                    },{
                        name: 'UsedUnity',
                        data: {{MEMRes.UsedUnity|safe}}
                    },{
                        name: 'ReservedGFX',
                        data: {{MEMRes.ReservedGFX|safe}}
                    }]
                });

                $('#container5').highcharts({
                    title: {
                        text: '',
                        x: -20 //center
                    },
                    xAxis: {
                        type:'linear',
                        tickInterval:50,
                        title: {
                            text: '帧数'
                        }
                    },
                    yAxis: {
                        min:0,
                        title: {
                            text: 'Mono内存占用(MB)'
                        }
                    },
                    tooltip: {
                        formatter: function() {
                            return '<b>'+ this.series.name +'</b><br/>'+
                            '帧数：<b>'+ this.point.x +'</b><br/>'+
                            '内存占用: <b>'+this.point.y+'MB</b>';
                        }
                    },
                    plotOptions:{
                    },
                    legend: {
                        layout: 'vertical',
                        align: 'right',
                        verticalAlign: 'middle',
                        borderWidth: 0
                    },
                    series: [{
                        name: 'Reserved Mono',
                        data: {{MonoRes.ReservedMono|safe}}
                    },{
                        name: 'Used Mono',
                        data: {{MonoRes.UsedMono|safe}}
                    }]
                });

                $('#container6').highcharts({
                    title: {
                        text: '',
                        x: -20 //center
                    },
                    xAxis: {
                        type:'linear',
                        tickInterval:50,
                        title: {
                            text: '帧数'
                        }
                    },
                    yAxis: {
                        min:0,
                        title: {
                            text: 'Texture数量'
                        }
                    },
                    tooltip: {
                        formatter: function() {
                            return '<b>'+ this.series.name +'</b><br/>'+
                            '帧数：<b>'+ this.point.x +'</b><br/>'+
                            '数量: <b>'+this.point.y+'</b>';
                        }
                    },
                    plotOptions:{
                    },
                    legend: {
                        layout: 'vertical',
                        align: 'right',
                        verticalAlign: 'middle',
                        borderWidth: 0
                    },
                    series: [{
                        name: 'Texture数量',
                        data: {{RMEMRes.TextureNum|safe}}
                    }]
                });

                $('#container7').highcharts({
                    title: {
                        text: '',
                        x: -20 //center
                    },
                    xAxis: {
                        type:'linear',
                        tickInterval:50,
                        title: {
                            text: '帧数'
                        }
                    },
                    yAxis: {
                        min:0,
                        title: {
                            text: 'Texture内存占用'
                        }
                    },
                    tooltip: {
                        formatter: function() {
                            return '<b>'+ this.series.name +'</b><br/>'+
                            '帧数：<b>'+ this.point.x +'</b><br/>'+
                            '内存占用: <b>'+this.point.y+'MB</b>';
                        }
                    },
                    plotOptions:{
                    },
                    legend: {
                        layout: 'vertical',
                        align: 'right',
                        verticalAlign: 'middle',
                        borderWidth: 0
                    },
                    series: [{
                        name: 'Texture内存占用',
                        data: {{RMEMRes.TextureMem|safe}}
                    }]
                });

                $('#container8').highcharts({
                    title: {
                        text: '',
                        x: -20 //center
                    },
                    xAxis: {
                        type:'linear',
                        tickInterval:50,
                        title: {
                            text: '帧数'
                        }
                    },
                    yAxis: {
                        min:0,
                        title: {
                            text: 'Mesh数量'
                        }
                    },
                    tooltip: {
                        formatter: function() {
                            return '<b>'+ this.series.name +'</b><br/>'+
                            '帧数：<b>'+ this.point.x +'</b><br/>'+
                            '数量: <b>'+this.point.y+'</b>';
                        }
                    },
                    plotOptions:{
                    },
                    legend: {
                        layout: 'vertical',
                        align: 'right',
                        verticalAlign: 'middle',
                        borderWidth: 0
                    },
                    series: [{
                        name: 'Mesh数量',
                        data: {{RMEMRes.MeshNum|safe}}
                    }]
                });

                $('#container9').highcharts({
                    title: {
                        text: '',
                        x: -20 //center
                    },
                    xAxis: {
                        type:'linear',
                        tickInterval:50,
                        title: {
                            text: '帧数'
                        }
                    },
                    yAxis: {
                        min:0,
                        title: {
                            text: 'Mesh内存占用'
                        }
                    },
                    tooltip: {
                        formatter: function() {
                            return '<b>'+ this.series.name +'</b><br/>'+
                            '帧数：<b>'+ this.point.x +'</b><br/>'+
                            '内存占用: <b>'+this.point.y+'MB</b>';
                        }
                    },
                    plotOptions:{
                    },
                    legend: {
                        layout: 'vertical',
                        align: 'right',
                        verticalAlign: 'middle',
                        borderWidth: 0
                    },
                    series: [{
                        name: 'Mesh内存占用',
                        data: {{RMEMRes.MeshMem|safe}}
                    }]
                });

                $('#container10').highcharts({
                    title: {
                        text: '',
                        x: -20 //center
                    },
                    xAxis: {
                        type:'linear',
                        tickInterval:50,
                        title: {
                            text: '帧数'
                        }
                    },
                    yAxis: {
                        min:0,
                        title: {
                            text: 'Material数量'
                        }
                    },
                    tooltip: {
                        formatter: function() {
                            return '<b>'+ this.series.name +'</b><br/>'+
                            '帧数：<b>'+ this.point.x +'</b><br/>'+
                            '数量: <b>'+this.point.y+'</b>';
                        }
                    },
                    plotOptions:{
                    },
                    legend: {
                        layout: 'vertical',
                        align: 'right',
                        verticalAlign: 'middle',
                        borderWidth: 0
                    },
                    series: [{
                        name: 'Material数量',
                        data: {{RMEMRes.MaterialNum|safe}}
                    }]
                });

                $('#container11').highcharts({
                    title: {
                        text: '',
                        x: -20 //center
                    },
                    xAxis: {
                        type:'linear',
                        tickInterval:50,
                        title: {
                            text: '帧数'
                        }
                    },
                    yAxis: {
                        min:0,
                        title: {
                            text: 'Material内存占用'
                        }
                    },
                    tooltip: {
                        formatter: function() {
                            return '<b>'+ this.series.name +'</b><br/>'+
                            '帧数：<b>'+ this.point.x +'</b><br/>'+
                            '内存占用: <b>'+this.point.y+'MB</b>';
                        }
                    },
                    plotOptions:{
                    },
                    legend: {
                        layout: 'vertical',
                        align: 'right',
                        verticalAlign: 'middle',
                        borderWidth: 0
                    },
                    series: [{
                        name: 'Material内存占用',
                        data: {{RMEMRes.MaterialMem|safe}}
                    }]
                });


                $('#container12').highcharts({
                    title: {
                        text: '',
                        x: -20 //center
                    },
                    xAxis: {
                        type:'linear',
                        tickInterval:50,
                        title: {
                            text: '帧数'
                        }
                    },
                    yAxis: {
                        min:0,
                        title: {
                            text: 'Animation Clip数量'
                        }
                    },
                    tooltip: {
                        formatter: function() {
                            return '<b>'+ this.series.name +'</b><br/>'+
                            '帧数：<b>'+ this.point.x +'</b><br/>'+
                            '数量: <b>'+this.point.y+'</b>';
                        }
                    },
                    plotOptions:{
                    },
                    legend: {
                        layout: 'vertical',
                        align: 'right',
                        verticalAlign: 'middle',
                        borderWidth: 0
                    },
                    series: [{
                        name: 'Animation Clip',
                        data: {{RMEMRes.AnimClipNum|safe}}
                    }]
                });

                $('#container13').highcharts({
                    title: {
                        text: '',
                        x: -20 //center
                    },
                    xAxis: {
                        type:'linear',
                        tickInterval:50,
                        title: {
                            text: '帧数'
                        }
                    },
                    yAxis: {
                        min:0,
                        title: {
                            text: 'Animation Clip内存占用'
                        }
                    },
                    tooltip: {
                        formatter: function() {
                            return '<b>'+ this.series.name +'</b><br/>'+
                            '帧数：<b>'+ this.point.x +'</b><br/>'+
                            '内存占用: <b>'+this.point.y+'MB</b>';
                        }
                    },
                    plotOptions:{
                    },
                    legend: {
                        layout: 'vertical',
                        align: 'right',
                        verticalAlign: 'middle',
                        borderWidth: 0
                    },
                    series: [{
                        name: 'Animation Clip内存占用',
                        data: {{RMEMRes.AnimClipNum|safe}}
                    }]
                });

                $('#container14').highcharts({
                    title: {
                        text: '',
                        x: -20 //center
                    },
                    xAxis: {
                        type:'linear',
                        tickInterval:50,
                        title: {
                            text: '帧数'
                        }
                    },
                    yAxis: {
                        min:0,
                        title: {
                            text: 'Audio Clip数量'
                        }
                    },
                    tooltip: {
                        formatter: function() {
                            return '<b>'+ this.series.name +'</b><br/>'+
                            '帧数：<b>'+ this.point.x +'</b><br/>'+
                            '数量: <b>'+this.point.y+'</b>';
                        }
                    },
                    plotOptions:{
                    },
                    legend: {
                        layout: 'vertical',
                        align: 'right',
                        verticalAlign: 'middle',
                        borderWidth: 0
                    },
                    series: [{
                        name: 'Audio Clip',
                        data: {{RMEMRes.AudioClipNum|safe}}
                    }]
                });

                $('#container15').highcharts({
                    title: {
                        text: '',
                        x: -20 //center
                    },
                    xAxis: {
                        type:'linear',
                        tickInterval:50,
                        title: {
                            text: '帧数'
                        }
                    },
                    yAxis: {
                        min:0,
                        title: {
                            text: 'Audio Clip内存占用'
                        }
                    },
                    tooltip: {
                        formatter: function() {
                            return '<b>'+ this.series.name +'</b><br/>'+
                            '帧数：<b>'+ this.point.x +'</b><br/>'+
                            '内存占用: <b>'+this.point.y+'MB</b>';
                        }
                    },
                    plotOptions:{
                    },
                    legend: {
                        layout: 'vertical',
                        align: 'right',
                        verticalAlign: 'middle',
                        borderWidth: 0
                    },
                    series: [{
                        name: 'Audio Clip内存占用',
                        data: {{RMEMRes.AudioClipMem|safe}}
                    }]
                });




            });

            

	        function InitialYaxisLabelsFPS(chart)
	        {
	            var max=chart.yAxis[0].dataMax;
	            chart.yAxis[0].update({
	                max:max
	            });
	        }

	        function InitialYaxisLabelsDC(chart)
	        {
	            var max=chart.yAxis[0].dataMax;
	            if(max<200) max=220;
	            chart.yAxis[0].update({
	                max:max
	            });
	        }

	        function InitialYaxisLabelsTRI(chart)
	        {
	            var max=chart.yAxis[0].dataMax;
	            if(max<100000) max=100000+10;
	            chart.yAxis[0].update({
	                max:max
	            });
	        }

            function export_log(tablename)
            {
                //alert(tablename);
                window.open("/webtool/analysis_performance/exportLogToTxt/"+tablename);
            }

		</script>
        <style type="text/css">
            /* Table Head */
            #table-7 thead th {
            background-color: rgb(81, 130, 187);
            color: #fff;
            border-bottom-width: 0;
            }
            /* Heading and Column Style */
            #table-7 tr, #table-7 th {
            border-width: 1px;
            border-style: solid;
            }

            /* Padding and font style */
            #table-7 td, #table-7 th {
            padding: 5px 10px;
            font-size: 12px;
            font-family: Verdana;
            font-weight: bold;
            text-align: center;
            }
        </style>
    </head>
    <body>
    	<nav class="navbar-default navbar-static-top" role="navigation"> 
            <div class="container-fluid"> 
                <div class="navbar-header"> 
                    <a class="navbar-brand" href="/webtool/analysis_performance/index/">首页</a>  
                </div> 
            </div> 
        </nav>
        <div class="container-fluid"  style="padding:50px">
            <div class="row">
                <div class="col-md-4 column">
                    <div style="margin-top:100px">
                    <span ><font size="6">场景: {{scenename|safe}}</font></span><br>
                    <span ><font size="6">场景描述: {{scenedes|safe}}</font></span><br>
                    <span ><font size="6">机型: {{PhoneInfo.PhoneType|safe}}</font></span><br>
                    <span ><font size="6">分辨率: {{PhoneInfo.ResLength|safe}}X{{PhoneInfo.ResWidth|safe}}</font></span>
                    </div>
                </div>
                <div class="col-md-8 column">
                    <img src="/webtool/site_media/{{picpath}}/"  width="1000" height="500"/>
                </div>
            </div>   
        </div>
        <div style="padding:50px">
            <span title="每秒帧数"><font size="5">FPS (最大值:{{FPSRes.maxFPS|safe}} 最小值:{{FPSRes.minFPS|safe}} 均值:{{FPSRes.avgFPS|safe}})</font></span><br>
            <span><font size="4">正常范围建议20~30</font></span>
        </div>
        <div id="container0"></div>

        <div style="padding:50px">
            <span title="每帧CPU调用底层图形程序接口的次数"><font size="5">Draw Calls (最大值:{{DCRes.maxDC|safe}} 最小值:{{DCRes.minDC|safe}} 均值:{{DCRes.avgDC|safe}})</font></span><br>
            <span><font size="4">正常范围建议小于200</font></span>
        </div>
        <div id="container2"></div>
        <div style="padding:50px">
            <span title="每帧的三角形数"><font size="5">Triangles (最大值:{{TRIRes.maxTRI|safe}} 最小值:{{TRIRes.minTRI|safe}} 均值:{{TRIRes.avgTRI|safe}})</font></span><br>
            <span><font size="4">正常范围建议小于100k</font></span>
        </div>
        <div id="container3"></div>

        <div style="padding:50px"><font size="5">Reserved/Used Memory</font><br>
        <span><font size="4">Reserved Total (最大值:{{ReservedTotalRes.max|safe}}MB 最小值:{{ReservedTotalRes.min|safe}}MB 均值:{{ReservedTotalRes.avg|safe}}MB)</font></span><br>
        <span><font size="4">Reserved Unity (最大值:{{ReservedUnityRes.max|safe}}MB 最小值:{{ReservedUnityRes.min|safe}}MB 均值:{{ReservedUnityRes.avg|safe}}MB)</font></span><br>
        <span><font size="4">Reserved GFX (最大值:{{ReservedGFXRes.max|safe}}MB 最小值:{{ReservedGFXRes.min|safe}}MB 均值:{{ReservedGFXRes.avg|safe}}MB)</font></span><br>
        <span><font size="4">Used Total (最大值:{{UsedTotalRes.max|safe}}MB 最小值:{{UsedTotalRes.min|safe}}MB 均值:{{UsedTotalRes.avg|safe}}MB)</font></span><br>
        <span><font size="4">Used Unity (最大值:{{UsedUnityRes.max|safe}}MB 最小值:{{UsedUnityRes.min|safe}}MB 均值:{{UsedUnityRes.avg|safe}}MB)</font></span><br>
        </div>
        <div id="container4"></div>
        
        <div style="padding:50px"><font size="5">Mono Memory</font><br>
        <span><font size="4">Reserved Mono (最大值:{{ReservedMonoRes.max|safe}}MB 最小值:{{ReservedMonoRes.min|safe}}MB 均值:{{ReservedMonoRes.avg|safe}}MB)</font></span><br>
        <span><font size="4">Used Mono (最大值:{{UsedMonoRes.max|safe}}MB 最小值:{{UsedMonoRes.min|safe}}MB 均值:{{UsedMonoRes.avg|safe}}MB)</font></span><br>
        </div>
        <div id="container5"></div>

        <div style="padding:50px"><font size="5">Resource Memory</font>

            <div style="margin-top:30px"><font size="5">Texture</font>
                <div style="margin-top:20px"><font size="4">Texture数量</font></div>
                <div id="container6" style="margin-top:20px"></div>
                <div style="margin-top:20px"><font size="4">Texture内存占用量</font></div>
                <div id="container7" style="margin-top:20px"></div>
            </div>

            <div style="margin-top:30px"><font size="5">Mesh</font>
                <div style="margin-top:20px"><font size="4">Mesh数量</font></div>
                <div id="container8" style="margin-top:20px"></div>
                <div style="margin-top:20px"><font size="4">Mesh内存占用量</font></div>
                <div id="container9" style="margin-top:20px"></div>
            </div>

            <div style="margin-top:30px"><font size="5">Material</font>
                <div style="margin-top:20px"><font size="4">Material数量</font></div>
                <div id="container10" style="margin-top:20px"></div>
                <div style="margin-top:20px"><font size="4">Material内存占用量</font></div>
                <div id="container11" style="margin-top:20px"></div>
            </div>

            <div style="margin-top:30px"><font size="5">AnimationClip</font>
                <div style="margin-top:20px"><font size="4">AnimationClip数量</font></div>
                <div id="container12" style="margin-top:20px"></div>
                <div style="margin-top:20px"><font size="4">AnimationClip内存占用量</font></div>
                <div id="container13" style="margin-top:20px"></div>
            </div>

            <div style="margin-top:30px"><font size="5">AudioClip</font>
                <div style="margin-top:20px"><font size="4">AudioClip数量</font></div>
                <div id="container14" style="margin-top:20px"></div>
                <div style="margin-top:20px"><font size="4">AudioClip内存占用量</font></div>
                <div id="container15" style="margin-top:20px"></div>
            </div>

        </div>
        
        {% if questionExists %} 
        <div style="padding:50px"><font size="5">备注：</font><font size="4">该场景的cpu_stack文件有{{LongfunctionPath|safe}}条长度大于500个字符的函数路径。</font>
        <a href="#" onclick="export_log('{{tablename|safe}}')" style="margin-left:10px">导出大于500字符的函数路径结果</a>
        </div>     
        {% endif %}

    </body>   
 </html>